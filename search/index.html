<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>站內搜索 | らおしゃん，中れ！</title>
    <link rel="stylesheet" href="../styles.css">
    <link rel="icon" type="image/png" href="../favicon.svg">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://unpkg.com/lunr/lunr.js"></script>
</head>
<body>
    <header>
        <h1>らおしゃん，中れ！</h1>
        <button class="hamburger" aria-label="Open Menu"><img src="../hamburger.svg" alt="Menu" /></button>
        <nav id="navbar">
            <a href="/">本站簡介</a>
            <a href="/character/2024">人設存放</a>
            <a href="/note">雜七雜八</a>
            <a href="/contact">假人慢打</a>
            <a href="/tools" id="tools-link">龍的寶庫</a>
            <a href="/dice" id="dice-link">線上擲骰</a>
            <a href="/password" id="password-link">第四面牆</a>
        </nav>
    </header>

    <section id="search-section">
        <input type="text" id="search-input" placeholder="Search...">
        <ul id="search-results"></ul>
    </section>

    <script>
        // JSON structure for Lunr.js
        var documents = [
            {
                "id": "1",
                "title": "本站簡介",
                "content": "This is the introduction page content...",
                "url": "/"
            },
            {
                "id": "2",
                "title": "人設存放",
                "content": "This is the character storage page content...",
                "url": "/character/2024"
            },
            {
                "id": "3",
                "title": "雜七雜八",
                "content": "This is the miscellaneous page content...",
                "url": "/note"
            },
            {
                "id": "4",
                "title": "假人慢打",
                "content": "This is the contact page content...",
                "url": "/contact"
            },
            {
                "id": "5",
                "title": "龍的寶庫",
                "content": "This is the tools page content...",
                "url": "/tools"
            },
            {
                "id": "6",
                "title": "線上擲骰",
                "content": "This is the dice page content...",
                "url": "/dice"
            },
            {
                "id": "7",
                "title": "第四面牆",
                "content": "This is the password-protected page content...",
                "url": "/password"
            }
        ];

        // Lunr.js setup
        var idx = lunr(function () {
            this.ref('id');
            this.field('title');
            this.field('content');

            documents.forEach(function (doc) {
                this.add(doc);
            }, this);
        });

        // Search functionality
        $(document).ready(function () {
            $('#search-input').on('keyup', function () {
                var query = $(this).val();
                var results = idx.search(query);
                $('#search-results').empty();
                results.forEach(function (result) {
                    var item = documents.find(doc => doc.id === result.ref);
                    $('#search-results').append('<li><a href="' + item.url + '">' + item.title + '</a></li>');
                });
            });
        });
    </script>

    <script src="../navigation.js"></script>
    <script src="/footer.js"></script>
</body>
</html>
